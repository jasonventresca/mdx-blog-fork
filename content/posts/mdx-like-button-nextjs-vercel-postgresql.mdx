export const metadata = {
  id: "9afa4e37-16b2-40e1-8435-bfea762a90b3",
  type: "blog",
  title: "Like Button in an MDX App with Next.js and Vercel PostgreSQL",
  author: "O Wolfson",
  publishDate: "2024-06-27",
  description:
    "In this article, we will walk through the process of creating a like button for an MDX-based Next.js application.",
  categories: ["Web Development"],
  tags: ["likes", "vercel", "postgres"],
  modifiedDate: "2024-11-11T04:20:49.028Z",
  image: null,
  draft: false,
  relatedPosts: [
    "adding-mdx-support-to-your-next.js-project",
    "using-and-styling-custom-components-in-mdx-content",
    "import-components-to-mdx",
    "",
  ],
};

In this guide, we'll explore how to create a like button for an MDX-based Next.js application. The button will cater to both authenticated and anonymous users by leveraging local storage for temporary data storage and a PostgreSQL database hosted on Vercel for persistent storage. This ensures a seamless user experience with consistent data retention across devices and sessions.

Check out a [live example](https://mdx-next-static-app.vercel.app/mdx/like-button) of the implementation, and find the complete code for this project on [GitHub](https://github.com/owolfdev/mdx-next-static-app).

### Context

This implementation uses **Next.js 14**, which introduces Server Actions, enabling efficient server-side operations directly from React components. This eliminates the need for API routes, streamlining client-server interactions.

The project integrates the `@next/mdx` package for combining Markdown and React components. This approach is particularly useful for content-driven sites requiring dynamic interactivity.

By combining local storage and a PostgreSQL database, the like button offers robust functionality. Anonymous users have their likes tracked in local storage, while authenticated users' likes are stored persistently in the database.

### Prerequisites

Before starting, ensure you have the following:

- A Next.js project set up
- Vercel PostgreSQL database credentials
- Installed npm packages: `react-icons`, `uuid`, and `@vercel/postgres`

### Key Steps

1. **Set Up Environment Variables**  
   Configure a `.env.local` file in the root of your project with your Vercel PostgreSQL credentials.

2. **Create the Like Button Component**  
   Develop a `LikeButton` React component to manage the like button's functionality, including state management, local storage for anonymous users, and database interaction for persistent storage.

3. **Implement Server Actions**  
   Use Next.js Server Actions for database operations, such as counting likes, adding likes, removing likes, and verifying whether a user has liked a specific post.

4. **Integrate the Like Button in MDX Content**  
   Embed the `LikeButton` component directly within your MDX content. MDX allows the seamless inclusion of React components alongside Markdown, enhancing interactivity in content-driven applications.

### Benefits of the Approach

- **Dynamic Functionality**: The combination of React components and MDX provides a flexible platform for building dynamic, content-rich applications.
- **Persistent Storage**: By using local storage for anonymous users and PostgreSQL for authenticated ones, the solution caters to a diverse audience while ensuring data consistency.
- **Efficient Server Operations**: Server Actions in Next.js simplify client-server communication, reducing overhead and improving performance.

### Additional Resources

For more information, visit the [official Vercel documentation](https://vercel.com/docs/edge-network/database) on PostgreSQL database integration.
